# Session Notes — 2025-09-15 14:31

## What changed
- Added minimal MCP server under mcp/ to expose VPLM files via WebSocket tools.
- Updated root package.json with mcp:dev and mcp:start scripts.

## Why
- Enable ChatGPT to connect via MCP and use repo files as context for better Markdown and CLI outputs.

## Files touched
- Added: mcp/package.json, mcp/server.mjs, mcp/.env.example, mcp/README.md
- Modified: package.json

## Validation / Build steps
- Ran 
pm install in mcp/ (OK, 0 vulnerabilities).
- Started server: printed URLs ws://localhost:7860 and ws://.
- Encountered port conflict EADDRINUSE on 7860 (likely existing process). Use another PORT or stop the other service.

## How to run
- cd mcp && cp .env.example .env (optional) and set AUTH_TOKEN, PORT, REPO_ROOT.
- 
pm run dev (binds 0.0.0.0). If 7860 is in use, set PORT=7870.
- Connect from client with Authorization: Bearer <AUTH_TOKEN> (omit header if blank).

## Tools exposed
- list_files(dir?, pattern?)
- ead_file(path) (512KB cap)
- search_text(query, exts?)
- md_index()
- epo_info()

## Follow-ups
- Decide on fixed AUTH_TOKEN and non-conflicting PORT.
- Optionally add write/commit tools gated by token.
- Add ChatGPT MCP client config with ws URL and auth.
