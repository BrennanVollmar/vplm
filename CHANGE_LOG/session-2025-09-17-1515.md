# Session Notes — 2025-09-17 15:15

## What changed
- Fixed Desktop shortcut path creation; now correctly targets `scripts/dev.cmd` with proper working directory.
- Strengthened Vite dev startup to bind to `127.0.0.1:5173`, use a strict port, and auto-open the browser.
- Added dev-only local auth fallback in the frontend: if API is unreachable during development, allow sign-in for the two developer accounts you specified.
- Auto-hash plaintext passwords found in `mcp/data/users.json` on API startup, removing plaintext fields.
- Touched `.gitignore` to ignore `apps/vplm-portal/public/dev-users.local.json` (future-proof), and kept `mcp/data/` ignored.

## Why
- Eliminate “missing shortcut” and “refused to connect” issues.
- Ensure you can sign in as a developer even when the API isn’t running, while keeping strong security when it is.

## Files touched
- Modified: `scripts/add-desktop-shortcut.ps1`, `apps/vplm-portal/package.json`, `apps/vplm-portal/src/lib/auth.tsx`, `mcp/index-http.js`, `.gitignore`

## Validation
- Build succeeded. Dev login will work with API running; if API is down, the two dev accounts work locally via fallback.

## Follow-ups
- Optional: add a Desktop shortcut for `npm run dev:api` to start the API on demand.
- When moving to GoDaddy, set a proper DB and JWT secret; the fallback remains dev-only.


- Moved Environment to Developer and added dark mode + field mode switches in Settings.
- Removed Tools route; job page hosts all tools. Added map snapshot to Photos, photo lightbox, polygons on All Jobs Map, per-job PDF path.

